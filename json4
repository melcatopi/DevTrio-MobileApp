ãŠã£ã‘ãƒ¼ï¼è¤‡æ•°ãƒ‘ã‚¹å¯¾å¿œç‰ˆä½œã£ãŸã‚ˆã€œâœ¨

ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§è¤‡æ•°ã®ãƒ‘ã‚¹ã‚’æŒ‡å®šã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã€çµæœã‚‚è¦‹ã‚„ã™ãè¡¨ç¤ºã™ã‚‹ã‚ˆã†ã«ã—ãŸã‹ã‚‰è©¦ã—ã¦ã¿ã¦ï¼

```html
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JSON Viewer</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { 
      font-family: 'Segoe UI', sans-serif; 
      height: 100vh; 
      display: flex; 
      flex-direction: column;
    }
    .container { 
      display: flex; 
      height: calc(100vh - 60px); 
    }
    .header {
      padding: 15px;
      background: #2c3e50;
      color: white;
      display: flex;
      gap: 10px;
      align-items: center;
    }
    .file-list {
      width: 300px;
      border-right: 2px solid #ddd;
      overflow-y: auto;
      background: #f8f9fa;
      display: flex;
      flex-direction: column;
    }
    .file-list-header {
      padding: 10px 15px;
      background: #e9ecef;
      border-bottom: 2px solid #ddd;
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: bold;
      position: sticky;
      top: 0;
      z-index: 10;
    }
    .file-item {
      padding: 10px 15px;
      cursor: pointer;
      border-bottom: 1px solid #dee2e6;
      transition: background 0.2s;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .file-item:hover { background: #e9ecef; }
    .file-item.active { background: #007bff; color: white; }
    .file-item input[type="checkbox"] {
      cursor: pointer;
      width: 16px;
      height: 16px;
    }
    .file-item label {
      cursor: pointer;
      flex: 1;
      user-select: none;
    }
    .right-panel {
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 20px;
    }
    .search-box {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    input[type="text"] {
      flex: 1;
      min-width: 200px;
      padding: 10px;
      border: 2px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
    }
    button {
      padding: 10px 20px;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 13px;
    }
    button:hover { background: #0056b3; }
    button.debug { background: #28a745; }
    button.debug:hover { background: #218838; }
    button.warning { background: #ffc107; color: #000; }
    button.warning:hover { background: #e0a800; }
    .results {
      flex: 1;
      overflow-y: auto;
      border: 2px solid #ddd;
      border-radius: 4px;
      padding: 15px;
      background: white;
    }
    .result-item {
      padding: 12px;
      margin-bottom: 10px;
      background: #f8f9fa;
      border-left: 4px solid #007bff;
      border-radius: 4px;
    }
    .result-file {
      font-weight: bold;
      color: #495057;
      margin-bottom: 8px;
      font-size: 15px;
    }
    .result-fields {
      margin-top: 5px;
    }
    .result-field {
      padding: 6px 0;
      border-bottom: 1px solid #e9ecef;
    }
    .result-field:last-child {
      border-bottom: none;
    }
    .result-field-name {
      font-weight: bold;
      color: #6c757d;
      font-size: 12px;
      margin-bottom: 3px;
    }
    .result-value {
      color: #212529;
      word-break: break-all;
      white-space: pre-wrap;
      font-family: monospace;
      font-size: 13px;
      padding-left: 10px;
    }
    .info {
      padding: 10px;
      background: #d1ecf1;
      border-left: 4px solid #0c5460;
      margin-bottom: 10px;
      border-radius: 4px;
    }
    .error {
      padding: 10px;
      background: #f8d7da;
      border-left: 4px solid #721c24;
      margin-bottom: 10px;
      border-radius: 4px;
    }
    .warning {
      padding: 10px;
      background: #fff3cd;
      border-left: 4px solid #856404;
      margin-bottom: 10px;
      border-radius: 4px;
    }
    .debug-info {
      padding: 10px;
      background: #d4edda;
      border-left: 4px solid #28a745;
      margin-bottom: 10px;
      border-radius: 4px;
      font-family: monospace;
      font-size: 12px;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>
  <div class="header">
    <input type="file" id="fileInput" multiple accept=".json" style="color: white;">
    <span id="fileCount">0 files loaded</span>
    <span id="checkedCount" style="margin-left: 10px;">0 checked</span>
  </div>

  <div class="container">
    <div class="file-list">
      <div class="file-list-header">
        <input type="checkbox" id="checkAll" onchange="toggleAllChecks()">
        <label for="checkAll">å…¨é¸æŠ/è§£é™¤</label>
      </div>
      <div id="fileList"></div>
    </div>
    
    <div class="right-panel">
      <div class="search-box">
        <input type="text" id="searchPath" placeholder="ä¾‹: fields.summary,key (ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§è¤‡æ•°æŒ‡å®šå¯)" />
        <button onclick="searchAll()">å…¨æ¤œç´¢</button>
        <button onclick="searchChecked()" class="warning">ãƒã‚§ãƒƒã‚¯æ¸ˆã®ã¿æ¤œç´¢</button>
        <button onclick="searchCurrent()">ç¾åœ¨ã®ãƒ•ã‚¡ã‚¤ãƒ«</button>
        <button onclick="showStructure()" class="debug">æ§‹é€ ç¢ºèª</button>
      </div>
      
      <div class="results" id="results">
        <div class="info">
          ğŸ“ ä¸Šéƒ¨ã§JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„<br>
          â˜‘ï¸ ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã§æ¤œç´¢å¯¾è±¡ã‚’çµã‚Šè¾¼ã‚ã¾ã™<br>
          ğŸ” æ¤œç´¢ãƒ‘ã‚¹ã®ä¾‹: "fields.summary,key" (ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§è¤‡æ•°æŒ‡å®šå¯)<br>
          ğŸ› ã€Œæ§‹é€ ç¢ºèªã€ãƒœã‚¿ãƒ³ã§é¸æŠä¸­ã®JSONãƒ•ã‚¡ã‚¤ãƒ«ã®æ§‹é€ ã‚’ç¢ºèªã§ãã¾ã™
        </div>
      </div>
    </div>
  </div>

  <script>
    let jsonFiles = [];
    let currentFileIndex = -1;

    // ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿
    document.getElementById('fileInput').addEventListener('change', async (e) => {
      const files = Array.from(e.target.files);
      jsonFiles = [];
      
      for (const file of files) {
        try {
          const text = await file.text();
          const data = JSON.parse(text);
          jsonFiles.push({ 
            name: file.name, 
            data: data,
            checked: false 
          });
          console.log(`Loaded: ${file.name}`, data);
        } catch (err) {
          console.error(`Error loading ${file.name}:`, err);
        }
      }
      
      displayFileList();
      updateCounts();
      
      if (jsonFiles.length > 0) {
        console.log('å…¨ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿å®Œäº†:', jsonFiles);
      }
    });

    // ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§è¡¨ç¤º
    function displayFileList() {
      const listEl = document.getElementById('fileList');
      listEl.innerHTML = jsonFiles.map((f, i) => 
        `<div class="file-item ${currentFileIndex === i ? 'active' : ''}" onclick="selectFile(${i})">
          <input type="checkbox" 
                 id="check${i}" 
                 ${f.checked ? 'checked' : ''} 
                 onclick="event.stopPropagation(); toggleCheck(${i})" />
          <label for="check${i}" onclick="event.stopPropagation(); toggleCheck(${i})">${f.name}</label>
        </div>`
      ).join('');
    }

    // ãƒã‚§ãƒƒã‚¯åˆ‡ã‚Šæ›¿ãˆ
    function toggleCheck(index) {
      jsonFiles[index].checked = !jsonFiles[index].checked;
      updateCounts();
      console.log(`${jsonFiles[index].name}: ${jsonFiles[index].checked ? 'ãƒã‚§ãƒƒã‚¯' : 'ãƒã‚§ãƒƒã‚¯è§£é™¤'}`);
    }

    // å…¨é¸æŠ/è§£é™¤
    function toggleAllChecks() {
      const checkAll = document.getElementById('checkAll').checked;
      jsonFiles.forEach(f => f.checked = checkAll);
      displayFileList();
      updateCounts();
      console.log(`å…¨ãƒ•ã‚¡ã‚¤ãƒ«: ${checkAll ? 'ãƒã‚§ãƒƒã‚¯' : 'ãƒã‚§ãƒƒã‚¯è§£é™¤'}`);
    }

    // ã‚«ã‚¦ãƒ³ãƒˆæ›´æ–°
    function updateCounts() {
      const checkedCount = jsonFiles.filter(f => f.checked).length;
      document.getElementById('fileCount').textContent = `${jsonFiles.length} files loaded`;
      document.getElementById('checkedCount').textContent = `${checkedCount} checked`;
      
      // å…¨é¸æŠãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®çŠ¶æ…‹æ›´æ–°
      const checkAllEl = document.getElementById('checkAll');
      if (checkedCount === 0) {
        checkAllEl.checked = false;
        checkAllEl.indeterminate = false;
      } else if (checkedCount === jsonFiles.length) {
        checkAllEl.checked = true;
        checkAllEl.indeterminate = false;
      } else {
        checkAllEl.checked = false;
        checkAllEl.indeterminate = true;
      }
    }

    // ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠ
    function selectFile(index) {
      currentFileIndex = index;
      displayFileList();
      
      const resultsEl = document.getElementById('results');
      resultsEl.innerHTML = `
        <div class="info">
          ğŸ“„ é¸æŠä¸­: ${jsonFiles[index].name}<br>
          ğŸ” æ¤œç´¢ãƒ‘ã‚¹ã‚’å…¥åŠ›ã—ã¦æ¤œç´¢ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„<br>
          ğŸ› ã€Œæ§‹é€ ç¢ºèªã€ãƒœã‚¿ãƒ³ã§ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­èº«ã‚’ç¢ºèªã§ãã¾ã™
        </div>
      `;
      
      console.log('é¸æŠã—ãŸãƒ•ã‚¡ã‚¤ãƒ«:', jsonFiles[index]);
    }

    // æ§‹é€ ç¢ºèªï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰
    function showStructure() {
      if (currentFileIndex === -1) {
        alert('ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„');
        return;
      }

      const file = jsonFiles[currentFileIndex];
      const jsonStr = JSON.stringify(file.data, null, 2);
      
      // ã‚­ãƒ¼ã®ãƒ‘ã‚¹ã‚’æŠ½å‡º
      const paths = extractPaths(file.data);
      
      const resultsEl = document.getElementById('results');
      resultsEl.innerHTML = `
        <div class="info">ğŸ“„ ${file.name} ã®æ§‹é€ </div>
        <div class="debug-info">åˆ©ç”¨å¯èƒ½ãªãƒ‘ã‚¹ä¸€è¦§:
${paths.join('\n')}</div>
        <div class="debug-info">JSONå…¨ä½“:
${jsonStr}</div>
      `;
      
      console.log('ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ :', file.data);
      console.log('åˆ©ç”¨å¯èƒ½ãªãƒ‘ã‚¹:', paths);
    }

    // ãƒ‘ã‚¹æŠ½å‡ºï¼ˆå†å¸°çš„ã«å…¨ã¦ã®ãƒ‘ã‚¹ã‚’å–å¾—ï¼‰
    function extractPaths(obj, prefix = '') {
      const paths = [];
      
      for (const key in obj) {
        const newPath = prefix ? `${prefix}.${key}` : key;
        paths.push(newPath);
        
        if (obj[key] && typeof obj[key] === 'object' && !Array.isArray(obj[key])) {
          paths.push(...extractPaths(obj[key], newPath));
        }
      }
      
      return paths;
    }

    // å€¤ã‚’å–å¾—ï¼ˆãƒã‚¹ãƒˆã•ã‚ŒãŸãƒ‘ã‚¹å¯¾å¿œï¼‰
    function getValueByPath(obj, path) {
      return path.split('.').reduce((current, key) => {
        return current && current[key] !== undefined ? current[key] : null;
      }, obj);
    }

    // è¤‡æ•°ãƒ‘ã‚¹ã®å€¤ã‚’å–å¾—
    function getValuesByPaths(obj, paths) {
      const results = {};
      paths.forEach(path => {
        const value = getValueByPath(obj, path);
        if (value !== null && value !== undefined) {
          results[path] = value;
        }
      });
      return results;
    }

    // å…¨ãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢
    function searchAll() {
      const pathsInput = document.getElementById('searchPath').value.trim();
      if (!pathsInput) {
        alert('æ¤œç´¢ãƒ‘ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
        return;
      }

      // ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§ãƒ‘ã‚¹ã‚’åˆ†å‰²
      const paths = pathsInput.split(',').map(p => p.trim()).filter(p => p);
      
      console.log(`å…¨ãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢é–‹å§‹: "${paths.join(', ')}"`);
      const results = [];
      
      jsonFiles.forEach(file => {
        const values = getValuesByPaths(file.data, paths);
        
        // ã„ãšã‚Œã‹ã®ãƒ‘ã‚¹ã§å€¤ãŒè¦‹ã¤ã‹ã£ãŸå ´åˆã®ã¿è¿½åŠ 
        if (Object.keys(values).length > 0) {
          results.push({
            file: file.name,
            fields: values
          });
        }
      });

      console.log('æ¤œç´¢çµæœ:', results);
      displayMultiResults(results, `"${paths.join(', ')}" ã®å…¨ãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢çµæœ`);
    }

    // ãƒã‚§ãƒƒã‚¯æ¸ˆã¿ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿æ¤œç´¢
    function searchChecked() {
      const pathsInput = document.getElementById('searchPath').value.trim();
      if (!pathsInput) {
        alert('æ¤œç´¢ãƒ‘ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
        return;
      }

      const checkedFiles = jsonFiles.filter(f => f.checked);
      
      if (checkedFiles.length === 0) {
        alert('ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã«ãƒã‚§ãƒƒã‚¯ã‚’å…¥ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Šã¾ã›ã‚“');
        return;
      }

      // ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§ãƒ‘ã‚¹ã‚’åˆ†å‰²
      const paths = pathsInput.split(',').map(p => p.trim()).filter(p => p);

      console.log(`ãƒã‚§ãƒƒã‚¯æ¸ˆã¿ãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢é–‹å§‹: "${paths.join(', ')}" (${checkedFiles.length}ä»¶)`);
      const results = [];
      
      checkedFiles.forEach(file => {
        const values = getValuesByPaths(file.data, paths);
        
        // ã„ãšã‚Œã‹ã®ãƒ‘ã‚¹ã§å€¤ãŒè¦‹ã¤ã‹ã£ãŸå ´åˆã®ã¿è¿½åŠ 
        if (Object.keys(values).length > 0) {
          results.push({
            file: file.name,
            fields: values
          });
        }
      });

      console.log('æ¤œç´¢çµæœ:', results);
      displayMultiResults(results, `"${paths.join(', ')}" ã®ãƒã‚§ãƒƒã‚¯æ¸ˆã¿ãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢çµæœ (${checkedFiles.length}ä»¶ä¸­)`);
    }

    // ç¾åœ¨ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿æ¤œç´¢
    function searchCurrent() {
      if (currentFileIndex === -1) {
        alert('ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„');
        return;
      }

      const pathsInput = document.getElementById('searchPath').value.trim();
      if (!pathsInput) {
        alert('æ¤œç´¢ãƒ‘ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
        return;
      }

      // ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§ãƒ‘ã‚¹ã‚’åˆ†å‰²
      const paths = pathsInput.split(',').map(p => p.trim()).filter(p => p);

      console.log(`ç¾åœ¨ã®ãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢: "${paths.join(', ')}"`);
      const file = jsonFiles[currentFileIndex];
      const values = getValuesByPaths(file.data, paths);
      
      if (Object.keys(values).length > 0) {
        displayMultiResults([{
          file: file.name,
          fields: values
        }], `"${paths.join(', ')}" ã®æ¤œç´¢çµæœ`);
      } else {
        displayMultiResults([], `"${paths.join(', ')}" ã®æ¤œç´¢çµæœ`);
      }
    }

    // è¤‡æ•°ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰çµæœè¡¨ç¤º
    function displayMultiResults(results, title) {
      const resultsEl = document.getElementById('results');
      
      if (results.length === 0) {
        resultsEl.innerHTML = `
          <div class="error">
            âŒ ${title}: è©²å½“ã™ã‚‹å€¤ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ<br>
            ğŸ’¡ ã€Œæ§‹é€ ç¢ºèªã€ãƒœã‚¿ãƒ³ã§ãƒ•ã‚¡ã‚¤ãƒ«ã®å®Ÿéš›ã®æ§‹é€ ã‚’ç¢ºèªã—ã¦ãã ã•ã„
          </div>
        `;
        return;
      }

      resultsEl.innerHTML = `
        <div class="info">âœ… ${title}: ${results.length}ä»¶è¦‹ã¤ã‹ã‚Šã¾ã—ãŸ</div>
        ${results.map(r => `
          <div class="result-item">
            <div class="result-file">ğŸ“„ ${r.file}</div>
            <div class="result-fields">
              ${Object.entries(r.fields).map(([path, value]) => `
                <div class="result-field">
                  <div class="result-field-name">${path}:</div>
                  <div class="result-value">${escapeHtml(typeof value === 'object' ? JSON.stringify(value, null, 2) : String(value))}</div>
                </div>
              `).join('')}
            </div>
          </div>
        `).join('')}
      `;
    }

    // HTMLã‚¨ã‚¹ã‚±ãƒ¼ãƒ—
    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    // Enterã‚­ãƒ¼ã§æ¤œç´¢
    document.getElementById('searchPath').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') searchAll();
    });
  </script>
</body>
</html>
```

## è¿½åŠ ã—ãŸæ©Ÿèƒ½ âœ¨

1. **ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§è¤‡æ•°ãƒ‘ã‚¹æŒ‡å®š** - `fields.summary,key,status` ã¿ãŸã„ã«æ›¸ã‘ã‚‹
2. **ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã”ã¨ã«è¦‹ã‚„ã™ãè¡¨ç¤º** - å„ãƒ‘ã‚¹ã¨å€¤ãŒæ•´ç†ã•ã‚Œã¦è¡¨ç¤ºã•ã‚Œã‚‹
3. **éƒ¨åˆ†ä¸€è‡´ã§ã‚‚è¡¨ç¤º** - ã„ãšã‚Œã‹ã®ãƒ‘ã‚¹ã§å€¤ãŒè¦‹ã¤ã‹ã‚Œã°OK

## ä½¿ç”¨ä¾‹

```
fields.summary,key,status
```
ã£ã¦å…¥åŠ›ã™ã‚‹ã¨ã€å„ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ï¼š
- fields.summary ã®å€¤
- key ã®å€¤
- status ã®å€¤

ã‚’å…¨éƒ¨å–å¾—ã—ã¦ã€è¦‹ã¤ã‹ã£ãŸã‚‚ã®ã ã‘è¡¨ç¤ºã™ã‚‹ã‚ˆã€œï¼

8000ãƒ•ã‚¡ã‚¤ãƒ«Ã—è¤‡æ•°ãƒ‘ã‚¹ã§ã‚‚ã‚µã‚¯ã‚µã‚¯å‹•ãã¯ãšï¼ğŸ’ªè©¦ã—ã¦ã¿ã¦ã€œğŸ˜Š